<html
    window-resizable="true"
    window-width="600dip"
    window-height="250dip"
>
<head>
<title>sciter utils demo</title>
<style>

@import url(vendor/8ctopus/sciter-logger/src/logger.css);

plaintext#logger {
    size: *;
}

</style>
<script type="module">

import {logger} from "vendor/8ctopus/sciter-logger/src/logger.js";

import * as utils from "src/utils.js";

document.on("ready", function() {
    // initialize logger
    logger.init("", false);

    // subscribe to logger messages
    logger.subscribe(function(level, message) {
        const log = document.$("plaintext#logger");

        log.append(JSX(level, {}, [message]));

        // scroll to last item
        log.lastElementChild.scrollIntoView({behavior: "smooth"});
    });

    // attach logger to console
    logger.attach();

    // capture unhandled exceptions
    logger.capture();

    // add support for F5 reload
    utils.addReloadWindow();

    // close window on escape key press
    utils.closeWindowOnEscape();

    // center window on screen
    utils.centerWindow("screen");

    // center window around position
    utils.centerWindowXY(null, 1200, 600);

    // bring window to front
    utils.windowToFront();

    // add minimize window shortcut
    utils.minimizeWindowShortcut();

    // add keyboard shortcut
    utils.addKeyboardShortcut(document, {
        key: "KeyM",
        ctrlKey: true,
    }, function(event) {
        console.log(utils.keyStr(event) + " pressed");
        return false;
    })

    const window = new Window({
        parent: Window.this,
        url   : __DIR__ + "window.html",
        state : Window.WINDOW_SHOWN,
        alignment: 1,
    });

    // close window on escape
    utils.closeWindowOnEscape(window);

    // add key logger
    utils.keyLogger(document, function(event) {
        console.log(utils.keyStr(event) + " pressed");
        return false;
    });

    document.on("click", "button", function(event, element) {
        utils.openLink(element.attributes["href"]);
    })
});

</script>
</head>
<body>
    <button href="https://duckduckgo.com">search</button>
    <plaintext #logger readonly />
</body>
</html>
